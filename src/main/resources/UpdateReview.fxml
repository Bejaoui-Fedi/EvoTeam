<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.effect.GaussianBlur?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="tn.esprit.controllers.UpdateReview"
           prefWidth="750" prefHeight="700"
           stylesheets="@styles.css">

    <!-- Background nature apaisant -->
    <ImageView fitWidth="750" fitHeight="700" preserveRatio="false" styleClass="nature-background">
        <image>
            <Image url="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?w=1600&amp;q=80"
                   backgroundLoading="true"/>
        </image>
        <effect>
            <GaussianBlur radius="5"/>
        </effect>
    </ImageView>

    <!-- Overlay vert pistache doux -->
    <Region styleClass="overlay"/>

    <!-- Contenu principal -->
    <BorderPane style="-fx-background-color: transparent; -fx-padding: 20;">

        <!-- Header -->
        <top>
            <VBox alignment="CENTER" spacing="10" style="-fx-padding: 20 0 15 0;">
                <HBox alignment="CENTER" spacing="15">
                    <Label text="&#x270F;" style="-fx-font-size: 36; -fx-text-fill: #3A7D6B;"/>
                    <Label text="Modifier Review" styleClass="header-label" style="-fx-font-size: 28;"/>
                    <Label text="&#x1F33F;" style="-fx-font-size: 36; -fx-text-fill: #3A7D6B;"/>
                </HBox>
                <HBox alignment="CENTER" spacing="10">
                    <Label text="Mettez a jour les informations de la review" styleClass="subheader-label"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="lblId" text="ID: -" style="-fx-font-size: 13; -fx-text-fill: #6F9A8D; -fx-font-style: italic;"/>
                </HBox>
            </VBox>
        </top>

        <!-- Centre : formulaire -->
        <center>
            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                <VBox spacing="18" styleClass="card" style="-fx-padding: 30; -fx-background-color: rgba(255,255,255,0.75); -fx-max-width: 520;"
                      alignment="CENTER_LEFT">

                    <!-- Event ID -->
                    <VBox spacing="5">
                        <Label text="Evenement (eventId) *" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #3A7D6B;"/>
                        <ComboBox fx:id="cbEventId" prefHeight="38" prefWidth="460"
                                  style="-fx-background-color: rgba(255,255,255,0.9); -fx-border-color: #B5D6CC; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                    </VBox>

                    <!-- Titre -->
                    <VBox spacing="5">
                        <Label text="Titre" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #3A7D6B;"/>
                        <TextField fx:id="title" prefHeight="38" promptText="Titre de la review"
                                   style="-fx-background-color: rgba(255,255,255,0.9); -fx-border-color: #B5D6CC; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                    </VBox>

                    <!-- Rating -->
                    <VBox spacing="5">
                        <Label text="Rating (1 a 5) *" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #3A7D6B;"/>
                        <TextField fx:id="rating" prefHeight="38" promptText="Ex: 4"
                                   style="-fx-background-color: rgba(255,255,255,0.9); -fx-border-color: #B5D6CC; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                    </VBox>

                    <!-- Date review -->
                    <VBox spacing="5">
                        <Label text="Date review *" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #3A7D6B;"/>
                        <DatePicker fx:id="reviewDate" prefHeight="38" prefWidth="460"
                                    style="-fx-background-color: rgba(255,255,255,0.9); -fx-border-color: #B5D6CC; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                    </VBox>

                    <!-- Commentaire -->
                    <VBox spacing="5">
                        <Label text="Commentaire" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #3A7D6B;"/>
                        <TextArea fx:id="comment" prefRowCount="4" wrapText="true" promptText="Votre commentaire..."
                                  style="-fx-background-color: rgba(255,255,255,0.9); -fx-border-color: #B5D6CC; -fx-border-radius: 8; -fx-background-radius: 8;"/>
                    </VBox>

                    <!-- Boutons -->
                    <HBox spacing="12" alignment="CENTER" style="-fx-padding: 15 0 5 0;">
                        <Button text="Enregistrer" onAction="#handleUpdate" styleClass="button-primary"
                                prefWidth="200" prefHeight="40"/>
                        <Button text="Annuler" onAction="#closeWindow" styleClass="button-secondary"
                                prefWidth="140" prefHeight="40"/>
                    </HBox>

                </VBox>
            </ScrollPane>
        </center>

        <!-- Footer -->
        <bottom>
            <HBox alignment="CENTER" style="-fx-padding: 15 0 10 0;">
                <VBox alignment="CENTER" spacing="5">
                    <Label text="Bienveillance - Respect - Organisation"
                           style="-fx-font-size: 13; -fx-text-fill: #3A7D6B;"/>
                    <Label text="PsyCoach Pro - Gestion des reviews"
                           style="-fx-font-size: 11; -fx-text-fill: #6F9A8D;"/>
                </VBox>
            </HBox>
        </bottom>

    </BorderPane>
</StackPane>