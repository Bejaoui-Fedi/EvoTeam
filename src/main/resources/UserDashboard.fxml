<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.effect.GaussianBlur?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="tn.esprit.controllers.UserDashboardController"
           prefWidth="1400" prefHeight="800"
           stylesheets="@styles.css">

    <!-- ðŸŒ¿ Background nature apaisant -->
    <ImageView fitWidth="1400" fitHeight="800" preserveRatio="false" styleClass="nature-background">
        <image>
            <Image url="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?w=1600&amp;q=80"
                   backgroundLoading="true"/>
        </image>
        <effect>
            <GaussianBlur radius="5"/>
        </effect>
    </ImageView>

    <!-- ðŸŒ¿ Overlay bleu -->
    <Region style="-fx-background-color: rgba(173, 216, 230, 0.7);"/>

    <!-- HBox principale avec Sidebar + Contenu -->
    <HBox spacing="0" alignment="CENTER">

        <!-- ================ NAVBAR USER - DESIGN BLEU AVEC ORGANISATION ================ -->
        <VBox style="-fx-background-color: rgba(58, 124, 165, 0.95);
                     -fx-background-radius: 0 20 20 0;
                     -fx-padding: 0;
                     -fx-pref-width: 280;
                     -fx-max-height: 800;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 8);"
              alignment="TOP_CENTER">

            <!-- En-tÃªte avec avatar utilisateur -->
            <VBox alignment="CENTER" spacing="10" style="-fx-background-color: rgba(40, 90, 130, 0.9); -fx-padding: 30 20 20 20; -fx-pref-width: 280;">
                <StackPane>
                    <ImageView fx:id="avatarImageView" fitWidth="80" fitHeight="80" preserveRatio="true">
                        <image>
                            <Image url="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" />
                        </image>
                        <clip>
                            <Circle radius="40" centerX="40" centerY="40"/>
                        </clip>
                    </ImageView>
                    <Circle radius="40" centerX="40" centerY="40" style="-fx-fill: transparent; -fx-stroke: white; -fx-stroke-width: 2;"/>
                </StackPane>

                <Label fx:id="userNameLabel" text="Utilisateur" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Label fx:id="userEmailLabel" text="email@example.com" style="-fx-font-size: 12; -fx-text-fill: #E0F2FF; -fx-font-style: italic;"/>
            </VBox>

            <Separator style="-fx-background-color: rgba(255,255,255,0.2); -fx-pref-height: 1.5; -fx-pref-width: 220; -fx-padding: 5 0;"/>

            <!-- MENU AVEC SECTIONS -->
            <VBox spacing="5" style="-fx-padding: 20 15 20 15;" VBox.vgrow="ALWAYS">

                <!-- Section MON ESPACE -->
                <Label text="MON ESPACE" style="-fx-text-fill: #AAD0D9; -fx-font-size: 12; -fx-font-weight: bold; -fx-padding: 0 0 5 10; -fx-letter-spacing: 1px;"/>

                <Button fx:id="btnDashboard" text="ðŸ“Š Tableau de bord"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleDashboard"/>

                <Button fx:id="btnEvents" text="ðŸ“… Ã‰vÃ©nements"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleEvents"/>

                <Button fx:id="btnExercises" text="ðŸ§˜ Exercices"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleExercises"/>

                <!-- Section BIEN-ÃŠTRE -->
                <Label text="BIEN-ÃŠTRE" style="-fx-text-fill: #AAD0D9; -fx-font-size: 12; -fx-font-weight: bold; -fx-padding: 15 0 5 10; -fx-letter-spacing: 1px;"/>

                <Button fx:id="btnWellness" text="ðŸ“ Journal bien-Ãªtre"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleWellness"/>

                <Button fx:id="btnAppointments" text="ðŸ“† Mes rendez-vous"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleAppointments"/>

                <!-- Section PERSONNEL -->
                <Label text="PERSONNEL" style="-fx-text-fill: #AAD0D9; -fx-font-size: 12; -fx-font-weight: bold; -fx-padding: 15 0 5 10; -fx-letter-spacing: 1px;"/>

                <Button fx:id="btnProfile" text="ðŸ‘¤ Mon profil"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleProfile"/>

                <Button fx:id="btnNotifications" text="ðŸ”” Notifications"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleNotifications"/>
            </VBox>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Footer avec dÃ©connexion -->
            <VBox alignment="CENTER" spacing="10" style="-fx-background-color: rgba(40, 90, 130, 0.9); -fx-padding: 20 0 30 0; -fx-pref-width: 280;">
                <Separator style="-fx-background-color: rgba(255,255,255,0.2); -fx-pref-height: 1.5; -fx-pref-width: 220;"/>

                <Button fx:id="btnLogout" text="ðŸšª DÃ©connexion"
                        style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"
                        onMouseEntered="#onButtonHover" onMouseExited="#onButtonExit"
                        onAction="#handleLogout"/>
            </VBox>
        </VBox>

        <!-- ================ CONTENU PRINCIPAL ================ -->
        <StackPane fx:id="contentArea" HBox.hgrow="ALWAYS"
                   style="-fx-background-color: transparent; -fx-padding: 0;"/>
    </HBox>
</StackPane>