<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="tn.esprit.controllers.professionnel.ProConsultationController"
      spacing="20" style="-fx-background-color: white; -fx-padding: 30;">

    <Label text="GESTION DES CONSULTATIONS" style="-fx-text-fill: #2c3e50;">
        <font>
            <Font size="28" name="System Bold"/>
        </font>
    </Label>

    <Separator/>

    <Label fx:id="messageLabel" style="-fx-text-fill: #e74c3c; -fx-font-size: 14px; -fx-font-weight: bold;"/>

    <TitledPane text="NOUVELLE CONSULTATION" expanded="true">
        <GridPane hgap="20" vgap="15" style="-fx-padding: 20;">

            <Label text="Rendez-vous :" GridPane.rowIndex="0" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <ComboBox fx:id="rdvCombo" GridPane.rowIndex="0" GridPane.columnIndex="1"
                      prefWidth="400" promptText="Sélectionnez un rendez-vous..."/>

            <Label text="Date consultation :" GridPane.rowIndex="1" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <DatePicker fx:id="dateConsultationPicker" GridPane.rowIndex="1" GridPane.columnIndex="1"
                        prefWidth="200"/>

            <Label text="Diagnostic :" GridPane.rowIndex="2" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextField fx:id="diagnosticField" GridPane.rowIndex="2" GridPane.columnIndex="1"
                       prefWidth="400" promptText="Diagnostic établi"/>

            <Label text="Observations :" GridPane.rowIndex="3" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextArea fx:id="observationArea" GridPane.rowIndex="3" GridPane.columnIndex="1"
                      prefRowCount="2" prefWidth="400" promptText="Observations médicales..."/>

            <Label text="Traitement :" GridPane.rowIndex="4" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextField fx:id="traitementField" GridPane.rowIndex="4" GridPane.columnIndex="1"
                       prefWidth="400" promptText="Traitement prescrit"/>

            <Label text="Ordonnance :" GridPane.rowIndex="5" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextArea fx:id="ordonnanceArea" GridPane.rowIndex="5" GridPane.columnIndex="1"
                      prefRowCount="2" prefWidth="400" promptText="Médicaments prescrits..."/>

            <Label text="Durée (min) :" GridPane.rowIndex="6" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <Spinner fx:id="dureeSpinner" GridPane.rowIndex="6" GridPane.columnIndex="1"
                     prefWidth="100"/>

            <Label text="Statut :" GridPane.rowIndex="7" GridPane.columnIndex="0"
                   style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <ChoiceBox fx:id="statutConsultationChoice" GridPane.rowIndex="7" GridPane.columnIndex="1"
                       prefWidth="150"/>

        </GridPane>
    </TitledPane>

    <HBox spacing="15" alignment="CENTER">
        <Button fx:id="saveButton" text="AJOUTER LA CONSULTATION"
                onAction="#handleSave"
                style="-fx-background-color: #27ae60; -fx-text-fill: white;
                       -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 25;"/>
        <Button fx:id="updateButton" text="MODIFIER" onAction="#handleUpdate" disable="true"
                style="-fx-background-color: #f39c12; -fx-text-fill: white;
                       -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 25;"/>
        <Button fx:id="deleteButton" text="SUPPRIMER" onAction="#handleDelete" disable="true"
                style="-fx-background-color: #e74c3c; -fx-text-fill: white;
                       -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 25;"/>
        <Button fx:id="clearButton" text="EFFACER" onAction="#handleClear"
                style="-fx-background-color: #95a5a6; -fx-text-fill: white;
                       -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 12 25;"/>
    </HBox>

    <Separator/>

    <Label text="LISTE DES CONSULTATIONS" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

    <TableView fx:id="tableView" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="colId" text="ID" prefWidth="60"/>
            <TableColumn fx:id="colAppointmentId" text="RDV #" prefWidth="80"/>
            <TableColumn fx:id="colDate" text="Date" prefWidth="100"/>
            <TableColumn fx:id="colDiagnostic" text="Diagnostic" prefWidth="200"/>
            <TableColumn fx:id="colStatut" text="Statut" prefWidth="120"/>
            <TableColumn fx:id="colDuree" text="Durée" prefWidth="80"/>
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
        </columnResizePolicy>
    </TableView>

    <HBox alignment="CENTER_RIGHT">
        <Button fx:id="retourButton" text="← RETOUR AUX RENDEZ-VOUS"
                onAction="#retourGestionRdv"
                style="-fx-background-color: #7f8c8d; -fx-text-fill: white;
                       -fx-font-size: 14px; -fx-padding: 10 20;"/>
    </HBox>
</VBox>