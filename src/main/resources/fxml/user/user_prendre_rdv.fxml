<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.effect.GaussianBlur?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="tn.esprit.controllers.user.UserPrendreRdvController"
           prefWidth="1400" prefHeight="800"
           stylesheets="@../../css/styles.css">

    <!-- Background nature -->
    <ImageView fitWidth="1400" fitHeight="800" preserveRatio="false" styleClass="nature-background">
        <image>
            <Image url="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?w=1600&amp;q=80"
                   backgroundLoading="true"/>
        </image>
        <effect>
            <GaussianBlur radius="5"/>
        </effect>
    </ImageView>

    <!-- Overlay -->
    <Region styleClass="overlay"/>

    <!-- Main HBox with Sidebar + Content -->
    <HBox spacing="0" alignment="CENTER">

        <!-- SIDEBAR -->
        <VBox style="-fx-background-color: #396f5b;
                     -fx-background-radius: 0;
                     -fx-padding: 0;
                     -fx-pref-width: 280;
                     -fx-max-height: 800;"
              alignment="TOP_CENTER">

            <!-- Logo Header -->
            <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #396f5b; -fx-padding: 30 20 20 20; -fx-pref-width: 280;">
                <Label text="ðŸŒ¿" style="-fx-font-size: 48; -fx-text-fill: white; -fx-effect: dropshadow(gaussian, rgba(255,255,255,0.3), 10, 0, 0, 2);"/>
                <Label text="EVOLIA" style="-fx-font-size: 22; -fx-font-weight: bold; -fx-text-fill: white;"/>
                <Label text="PATIENT" style="-fx-font-size: 14; -fx-text-fill: #E0F2E0; -fx-background-color: rgba(255,255,255,0.15); -fx-padding: 5 20; -fx-background-radius: 20;"/>
            </VBox>

            <Separator style="-fx-background-color: rgba(255,255,255,0.2); -fx-pref-height: 1.5; -fx-pref-width: 220; -fx-padding: 5 0;"/>

            <!-- Menu Sections -->
            <VBox spacing="15" style="-fx-padding: 20 15 20 15;" VBox.vgrow="ALWAYS">

                <Button text="ðŸ“Š Tableau de bord"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                <Button text="ðŸ“… Prendre RDV"
                        style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;
                               -fx-border-color: white; -fx-border-width: 0 0 0 4;"/>

                <Button text="ðŸ“‹ Mes Rendez-vous" onAction="#voirMesRendezVous"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                <Button text="ðŸ’š Bien-Ãªtre"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                <Button text="ðŸ§˜ Exercices"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"/>

                <Button text="ðŸ“… Ã‰vÃ©nements"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"/>
            </VBox>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Footer -->
            <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #396f5b; -fx-padding: 20 0 30 0; -fx-pref-width: 280;">
                <Separator style="-fx-background-color: rgba(255,255,255,0.2); -fx-pref-height: 1.5; -fx-pref-width: 220;"/>
                <Button text="ðŸšª DÃ©connexion"
                        style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: white; -fx-font-size: 15;
                               -fx-alignment: CENTER_LEFT; -fx-pref-width: 230; -fx-pref-height: 40;
                               -fx-padding: 0 0 0 20; -fx-background-radius: 10; -fx-cursor: hand;"/>
            </VBox>
        </VBox>

        <!-- MAIN CONTENT -->
        <BorderPane style="-fx-background-color: transparent; -fx-padding: 20;" HBox.hgrow="ALWAYS">

            <!-- Header -->
            <top>
                <VBox alignment="CENTER" spacing="10" style="-fx-padding: 20 0 20 0;">
                    <HBox alignment="CENTER" spacing="15">
                        <Label text="ðŸ“…" style="-fx-font-size: 40; -fx-text-fill: #3A7D6B;"/>
                        <Label text="Prendre Rendez-vous" styleClass="header-label" style="-fx-font-size: 32;"/>
                        <Label text="ðŸŒ¿" style="-fx-font-size: 40; -fx-text-fill: #3A7D6B;"/>
                    </HBox>
                    <Label text="Prenez soin de votre santÃ© et planifiez votre sÃ©ance" styleClass="subheader-label"/>
                </VBox>
            </top>

            <!-- Center Content -->
            <center>
                <StackPane>
                    <VBox styleClass="card" maxWidth="700" maxHeight="550" spacing="25" alignment="CENTER" style="-fx-background-color: rgba(255,255,255,0.8);">
                        <padding><Insets top="30" bottom="30" left="40" right="40"/></padding>

                        <!-- Form Title -->
                        <Label text="ðŸ“ DÃ©tails du rendez-vous" styleClass="header-label" style="-fx-font-size: 24;"/>
                        <Separator/>

                        <!-- Form -->
                        <GridPane hgap="30" vgap="25" alignment="CENTER">
                            <Label text="ðŸ“… Date" GridPane.rowIndex="0" GridPane.columnIndex="0"
                                   styleClass="normal-label" style="-fx-font-weight: bold;"/>
                            <DatePicker fx:id="datePicker" GridPane.rowIndex="0" GridPane.columnIndex="1"
                                        prefWidth="350" styleClass="text-field"/>

                            <Label text="â° Heure" GridPane.rowIndex="1" GridPane.columnIndex="0"
                                   styleClass="normal-label" style="-fx-font-weight: bold;"/>
                            <ComboBox fx:id="heureCombo" GridPane.rowIndex="1" GridPane.columnIndex="1"
                                      prefWidth="350" promptText="Choisissez un crÃ©neau"
                                      styleClass="text-field" editable="true"/>

                            <Label text="ðŸ“ Motif" GridPane.rowIndex="2" GridPane.columnIndex="0"
                                   styleClass="normal-label" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="motifField" GridPane.rowIndex="2" GridPane.columnIndex="1"
                                       prefWidth="350" promptText="Raison de la consultation"
                                       styleClass="text-field"/>

                            <Label text="ðŸ–¥ï¸ Type" GridPane.rowIndex="3" GridPane.columnIndex="0"
                                   styleClass="normal-label" style="-fx-font-weight: bold;"/>
                            <ChoiceBox fx:id="typeChoice" GridPane.rowIndex="3" GridPane.columnIndex="1"
                                       prefWidth="350" styleClass="text-field"/>
                        </GridPane>

                        <!-- Message -->
                        <Label fx:id="messageLabel" style="-fx-text-fill: #e74c3c; -fx-font-size: 14px; -fx-font-weight: bold;" alignment="CENTER"/>

                        <!-- Buttons -->
                        <HBox spacing="30" alignment="CENTER">
                            <Button fx:id="prendreRdvButton" text="Confirmer le RDV"
                                    onAction="#prendreRendezVous" styleClass="button-primary"
                                    prefWidth="250" prefHeight="45"/>

                            <Button fx:id="voirMesRdvButton" text="ðŸ“‹ Mes Rendez-vous"
                                    onAction="#voirMesRendezVous" styleClass="button-secondary"
                                    prefWidth="250" prefHeight="45"/>
                        </HBox>
                    </VBox>
                </StackPane>
            </center>

            <!-- Footer -->
            <bottom>
                <HBox alignment="CENTER" style="-fx-padding: 20 0 10 0;">
                    <VBox alignment="CENTER" spacing="5">
                        <Label text="ðŸŒ¿  Bienveillance â€¢ Respect â€¢ Accompagnement  ðŸ’™"
                               style="-fx-font-size: 14; -fx-text-fill: #3A7D6B;"/>
                        <Label text="Â© 2026 EvoTeam - Votre espace santÃ©"
                               style="-fx-font-size: 12; -fx-text-fill: #6F9A8D;"/>
                    </VBox>
                </HBox>
            </bottom>

        </BorderPane>

    </HBox>
</StackPane>